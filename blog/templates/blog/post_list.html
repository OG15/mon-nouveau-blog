{% extends 'blog/base.html' %}
{% load static %}

{% block content %}
  {% for post in posts %}
      <div class="post">
        <div class="date">
          {{ post.published_date }}
        </div>
        <h2><a href="{% url 'post_detail' pk=post.pk %}">{{ post.title }}</a></h2>
        <p>{{ post.text|linebreaksbr }}</p>
      </div>
  {% endfor %}

<h2 class="special">The galery </h2>
   <div id="galerie">
     <ul id="galerie_mini">
       {% for post in posts %}
       {% if post.image %}
        <li> <a href="{{ post.image.url }}" title="{{ post.title }}"> <img src="{{ post.image.url }}" /></a></li>
       {% endif %}
       {% endfor %}
    </ul>

    <dl id="photo">
        <dt></dt>
        <dd><img id="big_pict" src="" alt="" /></dd>
      </dl>
  </div>


{% endblock %}

{% block javascript %}
<script type="text/javascript">
  // code javascript here


  function displayPics()
  {
    var photos = document.getElementById('galerie_mini') ;
    // On récupère l'élément ayant pour id galerie_mini
    var liens = photos.getElementsByTagName('a') ;
    // On récupère dans une variable tous les liens contenu dans galerie_mini
    var big_photo = document.getElementById('big_pict') ;
    // Ici c'est l'élément ayant pour id big_pict qui est récupéré, c'est notre photo en taille normale

    var titre_photo = document.getElementById('photo').getElementsByTagName('dt')[0] ;
    // Et enfin le titre de la photo de taille normale
    // Une boucle parcourant l'ensemble des liens contenu dans galerie_mini

// var i = 0;
// while (i < 10){
//   console.log('hello ' + i);
//   i = i+1;
// }
//
// var table = ['hello', 'toto', 'test', 'gogo'];
// console.log(table.length);
//
// for (var i = 0; i <= table.length; ++i){
//   console.log('hello for ' + i);
// }

console.log(liens);

    for (var i = 0 ; i < liens.length ; ++i) {
      // Au clique sur ces liens
      liens[i].onclick = function() {
        big_photo.src = this.href; // On change l'attribut src de l'image en le remplaçant par la valeur du lien
        big_photo.alt = this.title; // On change son titre
        titre_photo.textContent = this.title; // On change le texte de titre de la photo
        return false; // Et pour finir on inhibe l'action réelle du lien
      };
    }
  }

  // Il ne reste plus qu'à appeler notre fonction au chargement de la page
  window.onload = displayPics;


</script>
{% endblock %}
